---
deployment:
  tasks:
    - export DEPLOYMENT_ID=$DEPLOYMENT_ID  # Optional: For cPanel logging
    - export DEPLOY_PATH=/home/cezfcsoc/public_html/TrainerProject
    - /usr/bin/rsync -av --delete ./TrainerProject/ $DEPLOY_PATH/  # Sync TrainerProject to public_html (use cp if rsync unavailable)
    - /bin/bash -c "source /home/cezfcsoc/virtualenv/masomo/3.11/bin/activate && cd $DEPLOY_PATH && pip install -r requirements.txt"
    - /bin/bash -c "source /home/cezfcsoc/virtualenv/masomo/3.11/bin/activate && cd $DEPLOY_PATH && python manage.py collectstatic --noinput"
    - /bin/bash -c "source /home/cezfcsoc/virtualenv/masomo/3.11/bin/activate && cd $DEPLOY_PATH && python manage.py migrate"
    - /bin/touch $DEPLOY_PATH/passenger_wsgi.py  # Restart Passenger app